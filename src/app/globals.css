@import '../styles/tokens.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Floating animation for laptop/hero images - combined with scale */
/* Scale is applied via CSS variable to combine with translateY */
@keyframes float {

  0%,
  100% {
    transform: translateY(0px) scale(var(--laptop-scale, 1.95));
  }

  50% {
    transform: translateY(-10px) scale(var(--laptop-scale, 1.95));
  }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
  transform-origin: center center;
}

@layer base {
  body {
    background-color: var(--bg-primary);
    color: var(--text-body);
    font-family: var(--font-sans);
  }

  /* Headings use high-contrast color */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: var(--text-heading);
  }
}

@layer components {

  /* Light Theme Surfaces - Swiss Style */
  .surface-dark {
    background: var(--bg-primary);
    color: var(--text-heading);
  }

  .surface-dark-alt {
    background: var(--bg-secondary);
    color: var(--text-heading);
  }

  .surface-light {
    background: var(--bg-primary);
    color: var(--text-heading);
  }

  .surface-light-alt {
    background: var(--bg-secondary);
    color: var(--text-heading);
  }

  /* Card component - white with subtle border and shadow */
  .surface-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    box-shadow: var(--shadow-card);
  }

  .surface-card:hover {
    box-shadow: var(--shadow-card-hover);
  }

  /* Accessibility: Screen reader only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  .sr-only.focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* Responsive typography utilities - Enhanced with better line-heights */
  .text-responsive {
    font-size: clamp(1rem, 2.5vw, 1.25rem);
    line-height: var(--leading-relaxed);
  }

  .text-responsive-lg {
    font-size: clamp(1.25rem, 3vw, 1.5rem);
    line-height: var(--leading-normal);
  }

  .text-responsive-xl {
    font-size: clamp(1.5rem, 4vw, 2rem);
    line-height: var(--leading-snug);
  }

  .text-responsive-2xl {
    font-size: clamp(2rem, 5vw, 3rem);
    line-height: var(--leading-tight);
    letter-spacing: var(--tracking-tight);
  }

  .text-responsive-3xl {
    font-size: clamp(2.5rem, 6vw, 4rem);
    line-height: var(--leading-tight);
    letter-spacing: var(--tracking-tight);
  }

  /* Responsive spacing utilities */
  .container-responsive {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  @media (min-width: 640px) {
    .container-responsive {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .container-responsive {
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }

  @media (min-width: 1280px) {
    .container-responsive {
      max-width: 1200px;
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }

  /* ============================================
     FOCUS STATES
     ============================================ */
  *:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring);
    outline-offset: var(--focus-ring-offset);
    border-radius: 2px;
  }

  /* ============================================
     ELEVATION SYSTEM
     ============================================ */
  .elevation-sm {
    box-shadow: var(--shadow-sm);
  }

  .elevation-md {
    box-shadow: var(--shadow-md);
  }

  .elevation-lg {
    box-shadow: var(--shadow-lg);
  }

  .elevation-xl {
    box-shadow: var(--shadow-xl);
  }

  /* ============================================
     MICRO-INTERACTIONS
     ============================================ */
  .hover-lift {
    transition: transform var(--duration-normal) var(--ease-smooth),
      box-shadow var(--duration-normal) var(--ease-smooth);
  }

  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }

  .hover-lift:active {
    transform: translateY(0);
    box-shadow: var(--shadow-md);
  }

  .hover-scale {
    transition: transform var(--duration-normal) var(--ease-smooth);
  }

  .hover-scale:hover {
    transform: scale(1.02);
  }

  .hover-scale:active {
    transform: scale(0.98);
  }

  /* ============================================
     STAGGER ANIMATIONS
     ============================================ */
  @keyframes stagger {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .stagger-item {
    animation: stagger var(--duration-normal) var(--ease-smooth) both;
  }

  .stagger-item:nth-child(1) {
    animation-delay: 0ms;
  }

  .stagger-item:nth-child(2) {
    animation-delay: 50ms;
  }

  .stagger-item:nth-child(3) {
    animation-delay: 100ms;
  }

  .stagger-item:nth-child(4) {
    animation-delay: 150ms;
  }

  .stagger-item:nth-child(5) {
    animation-delay: 200ms;
  }

  .stagger-item:nth-child(6) {
    animation-delay: 250ms;
  }

  /* ============================================
     FLUID TYPOGRAPHY
     ============================================ */
  .fluid-heading {
    font-size: clamp(2rem, 4vw + 1rem, 4rem);
    line-height: var(--leading-tight);
    letter-spacing: var(--tracking-tight);
  }

  .fluid-body {
    font-size: clamp(1rem, 1.5vw + 0.5rem, 1.125rem);
    line-height: var(--leading-relaxed);
  }

  /* ============================================
     TOUCH TARGETS (Accessibility)
     ============================================ */
  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }

  /* ============================================
     SECTION SPACING (Vertical Rhythm)
     ============================================ */
  .section-spacing {
    padding-top: var(--section-padding-mobile);
    padding-bottom: var(--section-padding-mobile);
  }

  @media (min-width: 768px) {
    .section-spacing {
      padding-top: var(--section-padding-tablet);
      padding-bottom: var(--section-padding-tablet);
    }
  }

  @media (min-width: 1024px) {
    .section-spacing {
      padding-top: var(--section-padding-desktop);
      padding-bottom: var(--section-padding-desktop);
    }
  }

  /* ============================================
     REFINED BORDERS
     ============================================ */
  .border-refined-light {
    border-color: var(--border-light);
  }

  .border-refined-dark {
    border-color: var(--border-dark);
  }

  /* ============================================
     REDUCED MOTION SUPPORT
     ============================================ */
  @media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* Print stylesheet */
@media print {

  /* Hide non-essential elements */
  header,
  footer,
  nav,
  button,
  .no-print {
    display: none !important;
  }

  /* Ensure content is visible */
  main {
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Optimize for printing */
  body {
    background: white !important;
    color: black !important;
  }

  /* Page breaks */
  section {
    page-break-inside: avoid;
  }

  /* Links */
  a {
    color: black !important;
    text-decoration: underline !important;
  }

  a[href]::after {
    content: ' (' attr(href) ')';
    font-size: 0.8em;
    color: #666;
  }

  /* Images */
  img {
    max-width: 100% !important;
    page-break-inside: avoid;
  }

  /* Headings */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    page-break-after: avoid;
  }
}

/* ============================================
   BRAIN GEARS ANIMATIONS
   ============================================ */

/* Main gears: fade in (opacity only) + rotate continuously */
/* Simplified: All gears fade in with rotation (1.2s), then main gears rotate continuously, background gears stop */

/* Main gears: full opacity (100%), rotate continuously after fade-in */
/* Matches: gear-base, gear-base_2, gear-base_3, etc. */
#brain-gears [id^="gear-"]:not(#gears-background) [id^="gear-base"],
#brain-gears [id^="gear-"]:not(#gears-background) g[id^="gear-base"],
#brain-gears-copy [id^="gear-"]:not(#gears-background) [id^="gear-base"],
#brain-gears-copy [id^="gear-"]:not(#gears-background) g[id^="gear-base"] {
  transform-origin: center;
  transform-box: fill-box;
  opacity: 0;
  will-change: transform, opacity;
  backface-visibility: hidden;
  contain: layout style paint;
  /* Allow drop shadows on child elements - only disable filter on the rotating container itself */
  /* filter: none !important; */
  /* Animation will be set via JavaScript to ensure correct speed values */
  /* CSS animation removed - set dynamically in HeroBrain.tsx */
}

/* Background gears: full opacity, very slow continuous rotation */
#brain-gears #gears-background [id^="bg-gear-"],
#brain-gears #gears-background g[id^="bg-gear-"],
#brain-gears #gears-background [id^="gear-base"],
#brain-gears #gears-background g[id^="gear-base"],
#brain-gears-copy #gears-background [id^="bg-gear-"],
#brain-gears-copy #gears-background g[id^="bg-gear-"] {
  transform-origin: center;
  transform-box: fill-box;
  opacity: 1;
  will-change: transform, opacity;
  backface-visibility: hidden;
  contain: layout style paint;
  /* Allow drop shadows on child elements - only disable filter on the rotating container itself */
  /* filter: none !important; */
  /* Animation will be set via JavaScript to ensure correct speed values */
  /* CSS animation removed - set dynamically in HeroBrain.tsx */
}

/* Hover layer hidden by default - matches base gear rotation */
/* Matches: gear-hover, gear-hover_2, gear-hover_3, etc. */
/* Hover gears inherit rotation variables from parent gear group to match base gear */
#brain-gears [id^="gear-"]:not(#gears-background) [id^="gear-hover"],
#brain-gears [id^="gear-"]:not(#gears-background) g[id^="gear-hover"],
#brain-gears-copy [id^="gear-"]:not(#gears-background) [id^="gear-hover"],
#brain-gears-copy [id^="gear-"]:not(#gears-background) g[id^="gear-hover"] {
  transform-origin: center;
  transform-box: fill-box;
  opacity: 0;
  will-change: transform, opacity;
  backface-visibility: hidden;
  contain: layout style paint;
  /* Allow drop shadows on child elements - only disable filter on the rotating container itself */
  /* filter: none !important; */
  /* Animation will be set via JavaScript to ensure correct speed values */
  /* CSS animation removed - set dynamically in HeroBrain.tsx */
}

/* Main gears: fade in with rotation (2s) */
@keyframes gear-fade-in-main {
  0% {
    opacity: 0;
    transform: translateZ(0) rotate(0deg);
  }

  100% {
    opacity: 1;
    transform: translateZ(0) rotate(var(--fade-in-rotation, 0deg));
  }
}

/* Background gears: fade in with rotation (2s), then very slow continuous rotation */
/* Background gears at full opacity */
@keyframes gear-fade-in-bg {
  0% {
    opacity: 0;
    transform: translateZ(0) rotate(0deg);
  }

  100% {
    opacity: 1;
    transform: translateZ(0) rotate(var(--fade-in-rotation, 0deg));
  }
}

/* Very slow continuous rotation for background gears - starts after fade-in completes (at 2s) */
@keyframes gear-rotate-bg-slow {
  from {
    transform: translateZ(0) rotate(var(--fade-in-rotation, 0deg));
  }

  to {
    transform: translateZ(0) rotate(calc(var(--fade-in-rotation, 0deg) + var(--rotation-amount, 360deg)));
  }
}

/* Continuous slow rotation for main gears - starts after fade-in completes (at 2s) */
@keyframes gear-rotate-continuous {
  from {
    transform: translateZ(0) rotate(var(--fade-in-rotation, 0deg));
  }

  to {
    transform: translateZ(0) rotate(calc(var(--fade-in-rotation, 0deg) + var(--rotation-amount, 360deg)));
  }
}

/* Use GPU acceleration for smoother animations */
#brain-gears,
#brain-gears-copy {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Dark theme gears - for dark backgrounds */
.gears-dark-theme #brain-gears,
.gears-dark-theme #brain-gears-copy {
  -webkit-filter: invert(1) hue-rotate(180deg);
  filter: invert(1) hue-rotate(180deg);
  /* Safari fix: ensure hardware acceleration */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Safari-specific: Force color rendering */
@supports (-webkit-appearance: none) and (not (-moz-appearance: none)) {
  .gears-dark-theme #brain-gears,
  .gears-dark-theme #brain-gears-copy {
    -webkit-filter: invert(1) hue-rotate(180deg) saturate(1.2);
    filter: invert(1) hue-rotate(180deg) saturate(1.2);
  }
}

/* Dark theme: Hide the hover gear variant entirely - just use base gear with glow */
.gears-dark-theme #brain-gears .gear-main--active [id^="gear-base"],
.gears-dark-theme #brain-gears .gear-main--active g[id^="gear-base"],
.gears-dark-theme #brain-gears-copy .gear-main--active [id^="gear-base"],
.gears-dark-theme #brain-gears-copy .gear-main--active g[id^="gear-base"] {
  opacity: 1 !important;
  visibility: visible !important;
}

.gears-dark-theme #brain-gears .gear-main--active [id^="gear-hover"],
.gears-dark-theme #brain-gears .gear-main--active g[id^="gear-hover"],
.gears-dark-theme #brain-gears-copy .gear-main--active [id^="gear-hover"],
.gears-dark-theme #brain-gears-copy .gear-main--active g[id^="gear-hover"] {
  opacity: 0 !important;
  visibility: hidden !important;
}

/* Performance optimizations for rotating gears - but allow drop shadows on child elements */
/* Only apply filter: none to the rotating containers themselves, not their children */
#brain-gears [id^="gear-"]:not(#gears-background) [id^="gear-base"],
#brain-gears [id^="gear-"]:not(#gears-background) [id^="gear-hover"],
#brain-gears #gears-background [id^="bg-gear-"],
#brain-gears-copy [id^="gear-"]:not(#gears-background) [id^="gear-base"],
#brain-gears-copy [id^="gear-"]:not(#gears-background) [id^="gear-hover"],
#brain-gears-copy #gears-background [id^="bg-gear-"] {
  /* Allow drop shadows - don't disable filters on child elements */
  will-change: transform, opacity;
  transform: translateZ(0);
  contain: layout style paint;
}

/* Transition for hover interactions - slow and smooth (4x slower) */
/* Hover lines - hidden by default */
#brain-gears #hover-lines,
#brain-gears-copy #hover-lines {
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

#brain-gears #hover-lines path,
#brain-gears-copy #hover-lines path {
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
  stroke: #2C2C2C;
  stroke-width: 3;
}

/* Hover gears - hidden by default */
#brain-gears [id^="gear-hover"],
#brain-gears g[id^="gear-hover"],
#brain-gears-copy [id^="gear-hover"],
#brain-gears-copy g[id^="gear-hover"] {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transform-origin: center;
  transform-box: fill-box;
}

/* Hover overlay - ensures full gear area is hoverable (including empty spaces inside) */
#brain-gears .gear-hover-overlay,
#brain-gears-copy .gear-hover-overlay {
  pointer-events: auto !important;
  cursor: pointer;
  fill: transparent !important;
  stroke: none !important;
  /* Ensure overlay captures all hover events and is on top */
  z-index: 1000;
  /* Prevent any interference from other elements */
  isolation: isolate;
}

/* Base gear - hide when hover gear is active */
#brain-gears .gear-main--active [id^="gear-base"],
#brain-gears .gear-main--active g[id^="gear-base"],
#brain-gears-copy .gear-main--active [id^="gear-base"],
#brain-gears-copy .gear-main--active g[id^="gear-base"] {
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
  transition: opacity 0.4s ease-out, visibility 0.4s ease-out !important;
}

/* Hover gear - show when active */
#brain-gears .gear-main--active [id^="gear-hover"],
#brain-gears .gear-main--active g[id^="gear-hover"],
#brain-gears-copy .gear-main--active [id^="gear-hover"],
#brain-gears-copy .gear-main--active g[id^="gear-hover"] {
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
  transition: opacity 0.4s ease-in, visibility 0.4s ease-in !important;
}

/* Teal glow on active gears */
#brain-gears .gear-main--active,
#brain-gears-copy .gear-main--active {
  filter: drop-shadow(0 0 18px rgba(11, 162, 181, 0.6)) !important;
}

/* Dark theme: Teal glow on hover - more visible */
.gears-dark-theme #brain-gears .gear-main--active,
.gears-dark-theme #brain-gears-copy .gear-main--active {
  filter: drop-shadow(0 0 20px rgba(11, 162, 181, 0.7)) drop-shadow(0 0 35px rgba(11, 162, 181, 0.4)) !important;
}

/* Hover lines - hidden by default */
#brain-gears [id^="hover-line-"],
#brain-gears-copy [id^="hover-line-"] {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

/* Hover lines - show when gear is active (opacity controlled by JS) */
#brain-gears .gear-main--active [id^="hover-line-"],
#brain-gears-copy .gear-main--active [id^="hover-line-"] {
  visibility: visible !important;
  pointer-events: none !important;
  /* Opacity will be controlled by JavaScript animation - no !important to allow JS override */
}

/* Line drawing animation - slow and smooth */
@keyframes line-draw-path {
  0% {
    stroke-dashoffset: var(--path-length, 1000);
    opacity: 0;
  }

  10% {
    opacity: 0.8;
    /* Fade in quickly at start */
  }

  100% {
    stroke-dashoffset: 0;
    opacity: 1;
  }
}

/* Dark theme: Boost BACKGROUND line visibility (connecting lines between gears) */
/* Colors are set BEFORE invert filter: dark → becomes light after invert */
.gears-dark-theme #brain-gears #lines-background path,
.gears-dark-theme #brain-gears-copy #lines-background path {
  opacity: 1 !important;
  stroke-width: 1px !important;
  stroke: #555555 !important; /* Medium gray = becomes ~70% brightness after invert */
}

/* Dark theme: Brighten the INTERNAL decorative lines/circles inside gears */
/* These are the concentric circles and patterns within gear faces */
/* Target all stroked elements within gears - the invert filter will make dark→light */
.gears-dark-theme #brain-gears [id^="gear-base"] path:not([fill]),
.gears-dark-theme #brain-gears [id^="gear-base"] circle:not([fill]),
.gears-dark-theme #brain-gears [id^="gear-base"] ellipse:not([fill]),
.gears-dark-theme #brain-gears-copy [id^="gear-base"] path:not([fill]),
.gears-dark-theme #brain-gears-copy [id^="gear-base"] circle:not([fill]),
.gears-dark-theme #brain-gears-copy [id^="gear-base"] ellipse:not([fill]) {
  stroke: #222222 !important; /* Dark = becomes BRIGHT (~#DDDDDD) after invert */
  stroke-opacity: 1 !important;
}

/* Increase stroke width for better visibility */
.gears-dark-theme #brain-gears [id^="gear-base"] path,
.gears-dark-theme #brain-gears [id^="gear-base"] circle,
.gears-dark-theme #brain-gears-copy [id^="gear-base"] path,
.gears-dark-theme #brain-gears-copy [id^="gear-base"] circle {
  stroke-width: 1.5px !important;
}

/* Ensure lines start invisible but end bright */
#brain-gears #lines-background path,
#brain-gears-copy #lines-background path {
  opacity: 0;
}

/* Line drawing animation keyframe only */

/* Hover line animation */
@keyframes line-draw-hover {
  from {
    stroke-dashoffset: var(--path-length, 1000);
    opacity: 0;
  }

  to {
    stroke-dashoffset: 0;
    opacity: 1;
  }
}

/* Make gears interactive (when gear-main class exists) */
#brain-gears .gear-main {
  cursor: pointer;
  pointer-events: auto;
  /* Better touch target size on mobile */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* Button fill animation - only on hover */
@keyframes button-fill-sweep {
  0% {
    clip-path: inset(0 100% 0 0);
  }

  100% {
    clip-path: inset(0 0 0 0);
  }
}

/* Button with hover fill animation */
.btn-animated {
  position: relative;
  overflow: hidden;
  isolation: isolate;
  /* No default animations */
}

/* Fill overlay - completely hidden by default, fills on hover */
.btn-animated::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg,
      rgba(255, 255, 255, 0.2) 0%,
      rgba(255, 255, 255, 0.3) 50%,
      rgba(255, 255, 255, 0.2) 100%);
  clip-path: inset(0 100% 0 0);
  transition: clip-path 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 1;
  border-radius: inherit;
  pointer-events: none;
}

/* Fill animation from left to right on hover */
.btn-animated:hover::before {
  clip-path: inset(0 0 0 0);
}

/* Optional: Add a subtle scale effect on hover for extra polish */
.btn-animated:hover {
  transform: scale(1.02);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Ensure button text/content is above fill and maintains z-index */
.btn-animated>*,
.btn-animated {
  position: relative;
  z-index: 2;
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {

  /* Disable all gear rotations for users who prefer reduced motion */
  #brain-gears [id^="gear-base"],
  #brain-gears [id^="bg-gear-"],
  #brain-gears [id^="gear-hover"] {
    animation: none !important;
  }

  /* Show lines fully drawn instead of animating */
  #brain-gears #lines-background path {
    animation: none !important;
    stroke-dashoffset: 0 !important;
  }

  /* Keep fade-in but make it instant */
  #brain-gears [id^="gear-base"],
  #brain-gears [id^="bg-gear-"] {
    opacity: 1 !important;
    animation: none !important;
  }

  /* Disable button animations for reduced motion */
  .btn-animated {
    animation: none !important;
  }

  .btn-animated::before {
    display: none !important;
  }
}

/* Mobile optimizations */
@media (max-width: 768px) {

  /* Reduce animation complexity on mobile for better performance */
  #brain-gears #lines-background path {
    /* Limit animated paths on mobile */
    animation-duration: 30s !important;
  }

  /* Ensure touch targets are large enough */
  #brain-gears .gear-main {
    min-width: 44px;
    min-height: 44px;
  }
}

/* ============================================
   Apple-like Animation System
   ============================================ */

/* Apple's signature easing curves */
:root {
  --ease-apple-standard: cubic-bezier(0.22, 1, 0.36, 1);
  --ease-apple-gentle: cubic-bezier(0.25, 0.1, 0.25, 1);
  --ease-apple-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-apple-spring: cubic-bezier(0.34, 1.56, 0.64, 1);

  --duration-fast: 0.2s;
  --duration-standard: 0.3s;
  --duration-medium: 0.4s;
  --duration-slow: 0.6s;
  --duration-slower: 0.8s;
}

/* ============================================
   GLOBAL TRANSITIONS
   ============================================ */

/* Smooth transitions for all interactive elements */
a,
button,
[role="button"] {
  transition:
    color var(--duration-standard) var(--ease-apple-standard),
    background-color var(--duration-standard) var(--ease-apple-standard),
    border-color var(--duration-standard) var(--ease-apple-standard),
    transform var(--duration-standard) var(--ease-apple-spring),
    opacity var(--duration-standard) var(--ease-apple-standard);
}

/* Cards and containers */
.card,
[class*="card"],
article,
section {
  transition:
    transform var(--duration-standard) var(--ease-apple-spring),
    opacity var(--duration-medium) var(--ease-apple-standard),
    box-shadow var(--duration-standard) var(--ease-apple-standard);
}

/* Images */
img {
  transition:
    transform var(--duration-medium) var(--ease-apple-standard),
    opacity var(--duration-medium) var(--ease-apple-standard);
  /* Prevent layout shifts */
  display: block;
  max-width: 100%;
  height: auto;
}

/* Prevent flickering on animated elements */
[data-framer-component],
[data-framer-name] {
  will-change: opacity, transform;
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Optimize motion sections and prevent flickering - CRITICAL FIX */
section[data-framer-component],
[data-framer-name],
.motion-section-hidden {
  will-change: opacity, transform;
  transform: translateZ(0);
  /* Force GPU layer */
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

/* CRITICAL: Ensure motion sections start hidden to prevent flash */
/* Motion sections start hidden - but let Framer Motion control visibility */
.motion-section-hidden {
  /* Don't force hidden with !important - let Framer Motion variants control it */
  /* Framer Motion will handle opacity and visibility via variants */
}

/* CRITICAL: All motion.div elements start hidden - but let Framer Motion control it */
/* Removed !important to prevent conflicts with Framer Motion state management */
[data-framer-component][data-initial="hidden"],
motion.div[data-initial="hidden"],
motion.section[data-initial="hidden"] {
  opacity: 0;
  visibility: hidden;
}

/* Loading screen gear animation */
@keyframes gear-rotate {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}

.gear-loading {
  animation: gear-rotate 9s linear infinite;
  /* 3x slower (was 3s, now 9s) */
}

/* Prevent layout shifts during animations - but be careful with contain */
/* Only apply contain to specific cases to avoid conflicts */
motion.section[data-visible="true"],
motion.div[data-visible="true"] {
  contain: layout style paint;
}

/* Optimize all animated elements */
[style*="will-change"] {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* ============================================
   MICRO-INTERACTIONS
   ============================================ */

/* Hover lift effect (Apple-like) */
.hover-lift {
  transition: transform var(--duration-standard) var(--ease-apple-spring);
}

.hover-lift:hover {
  transform: translateY(-4px);
}

/* Hover scale effect */
.hover-scale {
  transition: transform var(--duration-standard) var(--ease-apple-spring);
}

.hover-scale:hover {
  transform: scale(1.02);
}

/* Tap scale effect */
.tap-scale:active {
  transform: scale(0.98);
  transition: transform var(--duration-fast) var(--ease-apple-spring);
}

/* Smooth opacity transitions */
.fade-in {
  opacity: 0;
  transition: opacity var(--duration-medium) var(--ease-apple-standard);
}

.fade-in.visible {
  opacity: 1;
}